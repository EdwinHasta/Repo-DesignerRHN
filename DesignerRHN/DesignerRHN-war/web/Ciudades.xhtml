<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <ui:composition template="/Template.xhtml">
            <ui:define name="body">                  
                <h:form id="form">
                    <fieldset style="position: absolute; left: 10px; top: 110px; font-size: 10px; width: 645px; height: 285px; border-radius: 10px; ">
                        <p:panel  id="PanelCiudades" header="Ciudades" style=" font-size: 12px;width: 685px; height: 575px;  text-align: left" >
                            <p:dataTable id="Ciudad" var="ciudades" rowKey="#{ciudades.secuencia}" rowIndexVar="indice" style="font-size: 10px; border: 1px;"                           
                                         value="#{controlCiudades.listaCiudades}" scrollable="true" liveScroll="true" scrollRows="20" scrollHeight="150" 
                                         filteredValue="#{controlCiudades.filtradoListaCiudades}" emptyMessage="No se encontrarón resultados para la búsqueda"
                                         editable="true" editMode="cell"   
                                         >
                                <p:ajax event="filter"/>


                                <p:column headerText="Codigo" sortBy="#{ciudades.codigo}" filterBy="#{ciudades.codigo}" filterMatchMode="contains"  width="72" id="vcFechaInicial" filterStyle="display: none; visibility: hidden;"  >  
                                    <p:cellEditor>  
                                        <f:facet name="output">
                                            <h:outputText value="#{ciudades.codigo}" >
                                            </h:outputText>
                                        </f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{ciudades.codigo}" id="editarCodigosCiudades" style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"> 
                                            </p:inputText> 
                                        </f:facet>   
                                    </p:cellEditor>

                                    <f:facet name="footer">
                                        <h:outputText value="Codigo" />
                                    </f:facet>
                                </p:column>

                                <p:column headerText="Nombre de la Ciudad" sortBy="#{ciudades.nombre}" filterBy="#{ciudades.nombre}" filterMatchMode="contains"  width="72" id="ciudadesNombres" filterStyle="display: none; visibility: hidden;"  >  
                                    <p:cellEditor>  
                                        <f:facet name="output">
                                            <h:outputText value="#{ciudades.nombre}" >
                                            </h:outputText>
                                        </f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{ciudades.nombre}" id="editarNombresCiudades" style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"> 
                                            </p:inputText> 
                                        </f:facet>   
                                    </p:cellEditor>

                                    <f:facet name="footer">
                                        <h:outputText value="Nombre de la Ciudad" />
                                    </f:facet>
                                </p:column>

                                <p:column headerText="Departamento" sortBy="#{ciudades.departamento.nombre}" filterBy="#{ciudades.departamento.nombre}" filterMatchMode="contains" id="nombresDepartamentos" width="133" filterStyle="display: none; visibility: hidden;" >                                  
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{ciudades.departamento.nombre}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{ciudades.departamento.nombre}" id="editarContrato" style="font-size: 10px; border-radius: 0px; width: 93.5%;text-transform: uppercase"   > 
                                                <p:ajax event="change" />
                                                <p:ajax event="select" />
                                                <p:ajax event="dblclick" oncomplete="departamentosDialogo.show();"/>
                                            </p:inputText>
                                        </f:facet>  
                                    </p:cellEditor>

                                    <f:facet name="footer">
                                        <p:commandButton style="width: 100%; height: 16px; font-size: 9px; border: none; color: blue" id="fooDepartamentos" value="Departamentos"/>
                                    </f:facet>
                                </p:column>
                                <p:column headerText="Código Alternativo" sortBy="#{ciudades.codigoalternativo}" filterBy="#{ciudades.codigoalternativo}" filterMatchMode="contains" id="ciudadesCodigosAlternativos" width="133" filterStyle="display: none; visibility: hidden;" >                                  
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{ciudades.codigoalternativo}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{ciudades.codigoalternativo}" id="editarCodigosAlternativos" style="font-size: 10px; border-radius: 0px; width: 93.5%;text-transform: uppercase"  > 
                                                <p:ajax event="change"/>
                                                <p:ajax event="select" />
                                                <p:ajax event="dblclick"/>
                                            </p:inputText>
                                        </f:facet>  
                                    </p:cellEditor>

                                    <f:facet name="footer">
                                        <h:outputText value="Codigos Alternativos" />
                                    </f:facet>
                                </p:column>
                            </p:dataTable>     
                        </p:panel>
                    </fieldset>
                </h:form>
                <h:form id="formularioDialogos" >
                    <!-- DIALOGO L.O.V ESTATICO DE CIUDADES -->
                    <p:dialog header="Departamentos" widgetVar="departamentosDialogo" draggable="false" resizable="false" closable="false" id="departamentosDialogo"  
                              showEffect="fade" hideEffect="fade" width="457" modal="true" style="font-size: 11px;">
                        <p:dataTable id="lovDepartamentos" style="font-size: 11px; width: 430px" var="departamentos" value="#{controlCiudades.listaDepartamentos}" rowKey="#{departamentos.secuencia}"
                                     selection="#{controlCiudades.seleccionDepartamento}" selectionMode="single" widgetVar="lovDepartamentos" scrollable="true" scrollWidth="445" scrollHeight="250"
                                     filteredValue="#{controlCiudades.filtradoListaDepatartamentos}" emptyMessage="No se encontraron resultados con el criterio de busqueda.">              
                            <!-- <p:ajax event="rowSelect" listener="#{controlVigenciasTiposContratos.activarAceptar()}" update=":form:aceptarC"/>
                            <p:ajax event="rowDblselect" listener="#{controlVigenciasTiposContratos.actualizarCiudad()}" process="@this" onstart="lovDepartamentos.clearFilters()"/>-->
                            <f:facet name="header">  
                                <h:outputText value="Buscar Departamento:"  style="position: absolute; left: 27px; top: 14px"/>  
                                <p:inputText id="globalFilter" onkeyup="lovDepartamentos.filter();" style="width:150px; position: relative; left: -30px;" />  
                            </f:facet>
                            <p:column filterBy="#{departamentos.nombre}" width="200"  filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Departamento" />
                                </f:facet>
                                <h:outputText value="#{departamentos.nombre}" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton id="aceptarD" style="position: relative; left: 303px" value="Aceptar"  update="aceptarD" process="@this">
                            <p:resetInput target=":form:lovDepartamentos:globalFilter"/>
                        </p:commandButton>
                        <p:commandButton id="atrasD" style="position: relative; left: 303px" value="Atras" onclick="departamentosDialogo.hide(), lovDepartamentos.clearFilters();"  update="lovDepartamentos" process="@this">
                            <p:resetInput target=":form:lovDepartamentos:globalFilter"/>
                        </p:commandButton>
                    </p:dialog> 
                </h:form>
            </ui:define>
        </ui:composition>
    </h:head>
    <h:body>

    </h:body>
</html>

