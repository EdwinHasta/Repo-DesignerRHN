<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
    </h:head>
    <h:body>
        <ui:composition template="/Template.xhtml">
            <ui:define name="body">                  
                <h:form id="form">            
                    <p:panel  id="PanelTotal" header="Parametros de liquidación" style=" font-size: 12px; position: absolute; width: 874px; height: 530px;" >  

                        <fieldset style="position: absolute; left: 5px; top: 70px; font-size: 11px; width: 835px; height: 100px; border-radius: 10px; ">
                            <legend style="font-size: 12px; color: blue"><strong>Departamento a liquidar</strong></legend>
                            <p:panel id="panelParametro" style="border: none;">
                                <h:outputText value="Fecha desde: " style="font-weight: bold; color: #14388B; position: absolute; top: 20px; left: 7px;"/>
                                <p:calendar value="#{controlParametro.parametroLiquidacion.fechadesdecausado}"  style="font-size: 12px; position: absolute; top: 35px; left: 7px;"  id="fechaDesde" styleClass="ui-datepicker, calendarParametro"  
                                            navigator="true" showButtonPanel="true" locale="es" pattern="dd/MM/yyyy" autocomplete="true"
                                            onclick="ubicacionC(([{name: 'CAMPO', value: 'FECHA DESDE'}]));">                                         
                                    <p:ajax event="dateSelect" listener="#{controlParametro.cambiosCampos()}" update="@this"/>
                                    <p:ajax event="change" listener="#{controlParametro.cambiosCampos()}" update="@this"/>
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </p:calendar>

                                <h:outputText value="Fecha hasta: " style="font-weight: bold; color: #14388B; position: absolute; top: 20px; left: 109px"/>
                                <p:calendar value="#{controlParametro.parametroLiquidacion.fechahastacausado}" style="font-size: 12px; position: absolute; top: 35px; left: 109px"  id="fechaHasta" styleClass="ui-datepicker, calendarParametro"  
                                            navigator="true" showButtonPanel="true" locale="es" pattern="dd/MM/yyyy" autocomplete="true"
                                            onclick="ubicacionC(([{name: 'CAMPO', value: 'FECHA HASTA'}]));">                                         
                                    <p:ajax event="dateSelect" listener="#{controlParametro.cambiosCampos()}" update="@this"/>
                                    <p:ajax event="change" listener="#{controlParametro.cambiosCampos()}" update="@this"/>
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </p:calendar>

                                <h:outputText value="Fecha corte: " style="font-weight: bold; color: #14388B; position: absolute; top: 20px; left: 210px"/>
                                <p:calendar value="#{controlParametro.parametroLiquidacion.fechasistema}" style="font-size: 12px; position: absolute; top: 35px; left: 210px"  id="fechaCorte" styleClass="ui-datepicker, calendarParametro"  
                                            navigator="true" showButtonPanel="true" locale="es" pattern="dd/MM/yyyy" autocomplete="true"
                                            onclick="ubicacionC(([{name: 'CAMPO', value: 'FECHA CORTE'}]));">                                         
                                    <p:ajax event="dateSelect" listener="#{controlParametro.cambiosCampos()}" update="@this"/>
                                    <p:ajax event="change" listener="#{controlParametro.cambiosCampos()}" update="@this"/>
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </p:calendar>

                                <h:outputText value="Estructura: " style="font-weight: bold; color: #14388B; position: absolute; top: 20px; left: 311px"/>
                                <p:inputText id="Estructura" value="#{controlParametro.parametroLiquidacion.estructura.nombre}" style="position: absolute; top: 35px; left: 311px; width: 180px; font-weight: bold" 
                                             ondblclick="llamarLov(([{name: 'LOV', value: 'ESTRUCTURA'}]));" onclick="select();">
                                    <p:ajax event="click" listener="#{controlParametro.valoresBackupAutocompletar('ESTRUCTURA')}"/>
                                    <p:ajax event="change" listener="#{controlParametro.autocompletar('ESTRUCTURA', controlParametro.parametroLiquidacion.estructura.nombre)}"/>
                                </p:inputText>
                                <h:outputText value="Codigo C.C.: " style="font-weight: bold; color: #14388B; position: absolute; top: 20px; left: 504px"/>
                                <p:inputText id="codigoCC" value="#{controlParametro.parametroLiquidacion.estructura.centrocosto.codigo}" style="position: absolute; top: 35px; left: 504px; width: 70px" readonly="true"
                                             onclick="ubicacionC(([{name: 'CAMPO', value: 'CODIGO CC'}]));"/>
                                <h:outputText value="Nombre centro costo: " style="font-weight: bold; color: #14388B; position: absolute; top: 20px; left: 587px"/>
                                <p:inputText id="nombreCC" value="#{controlParametro.parametroLiquidacion.estructura.centrocosto.nombre}" style="position: absolute; top: 35px; left: 587px; width: 240px" readonly="true"
                                             onclick="ubicacionC(([{name: 'CAMPO', value: 'NOMBRE CC'}]));"/>

                                <h:outputText value="Tipo trabajador: " style="font-weight: bold; color: #14388B; position: absolute; top: 62px; left: 7px"/>
                                <p:inputText id="tipoTrabajador" value="#{controlParametro.parametroLiquidacion.tipotrabajador.nombre}" style="position: absolute; top: 77px; width: 239px; left: 7px" 
                                             ondblclick="llamarLov(([{name: 'LOV', value: 'TIPO TRABAJADOR'}]));" onclick="select();">
                                    <p:ajax event="click" listener="#{controlParametro.valoresBackupAutocompletar('TIPO TRABAJADOR')}"/>
                                    <p:ajax event="change" listener="#{controlParametro.autocompletar('TIPO TRABAJADOR', controlParametro.parametroLiquidacion.tipotrabajador.nombre)}"/>
                                </p:inputText>
                                <h:outputText value="Proceso: " style="font-weight: bold; color: #14388B; position: absolute; top: 62px; left: 260px"/>
                                <p:inputText id="proceso" value="#{controlParametro.parametroLiquidacion.proceso.descripcion}" style="position: absolute; top: 77px; left: 260px; width: 240px" 
                                             ondblclick="llamarLov(([{name: 'LOV', value: 'PROCESO'}]));" onclick="select();">
                                    <p:ajax event="click" listener="#{controlParametro.valoresBackupAutocompletar('PROCESO')}"/>
                                    <p:ajax event="change" listener="#{controlParametro.autocompletar('PROCESO', controlParametro.parametroLiquidacion.proceso.descripcion)}"/>
                                </p:inputText>
                            </p:panel>
                            <p:commandButton value="[ Adicionar los empleados a liquidar ]" style=" font-size: 15px; font-family: 'Book Antiqua'; font-weight: bold; position: absolute; top: 67px; left: 521px; width: 320px" actionListener="#{controlParametro.consultarEmpleadosParametrizados()}" process="@this" />
                        </fieldset>

                        <p:toolbar style="font-size: 12px; position: absolute; top: 40px; left: 12px; height: 23px">   
                            <p:toolbarGroup align="left"> 

                                <p:commandButton id="guardarRapido" value="" style="background-image: url(Imagenes/guardar.jpg); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px; " actionListener="#{controlParametro.guardarCambios()}" process="@this" />
                                <p:tooltip style="font-size: 12px" for="guardarRapido" value="Guardar" />
                                <p:commandButton id="editar" value="" style="background-image: url(Imagenes/editar.jpg); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px " actionListener="#{controlParametro.editarCelda()}" process="@this"/>
                                <p:tooltip style="font-size: 12px" for="editar" value="Editar" />

                                <p:separator style="position: relative; top: -10px;"/>

                                <p:commandButton id="listaValores" value="" style="background-image: url(Imagenes/lupa.png); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px " actionListener="#{controlParametro.listaValoresBoton()}" process="@this"/>
                                <p:tooltip style="font-size: 12px" for="listaValores" value="Lista de Valores" />

                                <p:commandButton id="filtrar" value="" style="background-image: url(Imagenes/embudo.jpg); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px " actionListener="#{controlParametro.activarCtrlF11()}" process="@this"/>
                                <p:tooltip style="font-size: 12px" for="filtrar" value="Activar filtrado" />

                                <p:separator style="position: relative; top: -10px;"/>

                                <p:commandButton id="exportarXLS" value="" style="background-image: url(Imagenes/excel.png); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px " ajax="false" actionListener="#{controlParametro.exportXLS()}" process="@this"/>
                                <p:tooltip style="font-size: 12px" for="exportarXLS" value="Exportar a XLS" />

                                <p:commandButton id="exportarXML" value="" style="background-image: url(Imagenes/XML.jpg); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px "  ajax="false" process="@this">
                                    <p:dataExporter type="xml"  target=":formExportar:empleadosParametrosExportar" fileName="EmpleadosParametrosXML" encoding="UTF-8"/> 
                                </p:commandButton> 
                                <p:tooltip style="font-size: 12px" for="exportarXML" value="Exportar a XML" />

                                <p:commandButton id="exportarPDF" value="" style="background-image: url(Imagenes/pdf.jpg); background-size: 100% 100%; background-repeat: no-repeat; width: 25px; height: 25px " actionListener="#{controlParametro.exportPDF()}" ajax="false" process="@this"/>
                                <p:tooltip style="font-size: 12px" for="exportarPDF" value="Exportar a PDF" />
                            </p:toolbarGroup>  
                        </p:toolbar> 

                        <fieldset style="position: absolute; left: 5px; top: 190px; font-size: 11px; width: 835px; height: 300px; border-radius: 10px; ">
                            <legend style="font-size: 12px; color: blue"><strong>Empleados a liquidar</strong></legend>

                            <p:dataTable id="empleadosParametros" var="empleadoParametro" rowKey="#{empleadoParametro.secuencia}" rowIndexVar="indice" style="font-size: 12px; border: 1px;"                            
                                         value="#{controlParametro.empleadosParametros}" scrollable="true" scrollHeight="245" scrollWidth="840"
                                         filteredValue="#{controlParametro.filtradoEmpleadosParametros}" emptyMessage="No se encontrarón resultados para la búsqueda"
                                         editable="true" editMode="cell" >

                                <p:column headerText="" width="60" style="padding: 0px">                                  
                                    <p:commandButton value="Quitar >" actionListener="#{controlParametro.eliminarParametros(indice)}" style="font-size: 10px; border-radius: 0px" process="@this" />
                                </p:column>  

                                <p:column headerText="Desde" sortBy="#{empleadoParametro.fechadesdecausado}" filterBy="#{empleadoParametro.fechadesdecausado}" filterMatchMode="contains"  width="60" id="FechaDesde" filterStyle="display: none; visibility: hidden;"  >  
                                    <f:facet name="header"> 
                                        <h:outputText value="Desde" />
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">
                                            <h:outputText value="#{empleadoParametro.fechadesdecausado}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </f:facet>  
                                        <f:facet name="input">
                                            <p:inputText  value="#{empleadoParametro.fechadesdecausado}" readonly="true"
                                                          onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'DESDE'}, {name: 'INDICE', value: '#{indice}'}]));">
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </p:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="Hasta" sortBy="#{empleadoParametro.fechahastacausado}" filterBy="#{empleadoParametro.fechahastacausado}" filterMatchMode="contains"  width="60" id="FechaHasta" filterStyle="display: none; visibility: hidden;"  >  
                                    <f:facet name="header">
                                        <h:outputText value="Hasta" />
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">
                                            <h:outputText value="#{empleadoParametro.fechahastacausado}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </h:outputText>
                                        </f:facet>  
                                        <f:facet name="input">
                                            <p:inputText  value="#{empleadoParametro.fechahastacausado}" readonly="true" 
                                                          onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'HASTA'}, {name: 'INDICE', value: '#{indice}'}]));">
                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                            </p:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="Código" sortBy="#{empleadoParametro.empleado.codigoempleado}" filterBy="#{empleadoParametro.empleado.codigoempleado}" filterMatchMode="contains" id="Codigo" width="80" filterStyle="display: none; visibility: hidden;" >                                  
                                    <f:facet name="header"><h:outputText value="Código"/> </f:facet> 
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{empleadoParametro.empleado.codigoempleado}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{empleadoParametro.empleado.codigoempleado}" readonly="true" 
                                                         style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"
                                                         onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'CODIGO'}, {name: 'INDICE', value: '#{indice}'}]));"/> 
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>  

                                <p:column headerText="Primer Apellido" sortBy="#{empleadoParametro.empleado.persona.primerapellido}" filterBy="#{empleadoParametro.empleado.persona.primerapellido}" filterMatchMode="contains" id="pApellido" width="100" filterStyle="display: none; visibility: hidden;" >                                  
                                    <f:facet name="header"><h:outputText value="Primer Apellido"/> </f:facet> 
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{empleadoParametro.empleado.persona.primerapellido}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{empleadoParametro.empleado.persona.primerapellido}" readonly="true"
                                                         onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'PAPELLIDO'}, {name: 'INDICE', value: '#{indice}'}]));"
                                                         style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"/> 
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>  

                                <p:column headerText="Segundo Apellido" sortBy="#{empleadoParametro.empleado.persona.segundoapellido}" filterBy="#{empleadoParametro.empleado.persona.segundoapellido}" filterMatchMode="contains" id="sApellido" width="100" filterStyle="display: none; visibility: hidden;" >                                  
                                    <f:facet name="header"><h:outputText value="Segundo Apellido"/> </f:facet> 
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{empleadoParametro.empleado.persona.segundoapellido}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{empleadoParametro.empleado.persona.segundoapellido}" readonly="true" 
                                                         onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'SAPELLIDO'}, {name: 'INDICE', value: '#{indice}'}]));"
                                                         style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"/> 
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>  

                                <p:column headerText="Nombre" sortBy="#{empleadoParametro.empleado.persona.nombre}" filterBy="#{empleadoParametro.empleado.persona.nombre}" filterMatchMode="contains" id="nombre" width="145" filterStyle="display: none; visibility: hidden;" >                                  
                                    <f:facet name="header"><h:outputText value="Nombre"/> </f:facet> 
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{empleadoParametro.empleado.persona.nombre}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{empleadoParametro.empleado.persona.nombre}" readonly="true" 
                                                         onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'NOMBRE'}, {name: 'INDICE', value: '#{indice}'}]));"
                                                         style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"/> 
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>  

                                <p:column headerText="Estado" sortBy="#{empleadoParametro.estadoParametro}" filterBy="#{empleadoParametro.estadoParametro}" filterMatchMode="contains" id="estadoParametro" filterStyle="display: none; visibility: hidden;" >                                  
                                    <f:facet name="header"><h:outputText value="Estado"/> </f:facet> 
                                    <p:cellEditor>  
                                        <f:facet name="output"><h:outputText value="#{empleadoParametro.estadoParametro}" /></f:facet>  
                                        <f:facet name="input">
                                            <p:inputText value="#{empleadoParametro.estadoParametro}" readonly="true"  
                                                         onfocus="ubicacionTabla(([{name: 'CAMPO', value: 'ESTADO'}, {name: 'INDICE', value: '#{indice}'}]));"
                                                         style="font-size: 10px; border-radius: 0px; width: 93.5%; text-transform: uppercase"/> 
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>  
                            </p:dataTable>
                        </fieldset>
                        <p:commandButton style="position: absolute; left: 9px; top: 505px; font-size: 11px; font-family: Arial, Helvetica, sans-serif;" id="REFRESCAR" value="Refrescar" icon="ui-icon-refresh" actionListener="#{controlParametro.salir()}" update="panelParametro, empleadosParametros"  process="@this" />
                        <p:commandButton style="position: absolute; left: 100px; top: 505px; font-size: 11px; font-family: Arial, Helvetica, sans-serif;" id="quitarTodos" value="Quitar todos" actionListener="#{controlParametro.borrarParametros()}" process="@this"/>
                    </p:panel>

                    <p:remoteCommand name="llamarLov" actionListener="#{controlParametro.llamarLov()}" process="@this"/>
                    <p:remoteCommand name="ubicacionC" actionListener="#{controlParametro.ubicacionCampo()}" process="@this"/>
                    <p:remoteCommand name="ubicacionTabla" actionListener="#{controlParametro.ubicacionCampoTabla()}" process="@this"/>
                </h:form>
                <h:form id="formularioDialogos">
                    <p:dialog header="Estructuras" widgetVar="estructurasDialogo" draggable="false" resizable="false" id="estructurasDialogo"  
                              showEffect="fade" hideEffect="fade" modal="true" width="718" height="420" style="font-size: 12px" closable="false">

                        <p:dataTable  id="lOVEstructuras" style="font-size: 11px; width: 690px" var="estructura" value="#{controlParametro.lovEstructuras}"
                                      scrollable="true" scrollHeight="300" scrollWidth="705" widgetVar="lOVEstructuras" 
                                      filteredValue="#{controlParametro.filtradoLovEstructuras}" emptyMessage="No se encontraron resultados con el criterio de busqueda."
                                      rowKey="#{estructura.secuencia}" selection="#{controlParametro.seleccionEstructura}" selectionMode="single">
                            <p:ajax event="rowSelect" listener="#{controlParametro.activarAceptar()}" update=":formularioDialogos:aceptarE"/> 
                            <p:ajax event="rowDblselect" listener="#{controlParametro.actualizarEstructura()}" process="@this" onstart="lOVEstructuras.clearFilters()"/>

                            <f:facet name="header">  
                                <h:outputText value="Buscar Estructura: "  style="position: absolute; left: 27px; top: 15px"/>  
                                <p:inputText id="globalFilter" onkeyup="lOVEstructuras.filter();" style="width: 250px; position: relative; left: -90px;" />  
                            </f:facet>                       
                            <p:column headerText="Nombre" width="200"  filterBy="#{estructura.nombre}" filterMatchMode="contains" >  
                                <h:outputText value="#{estructura.nombre}" />  
                            </p:column>  
                            <p:column headerText="Codigo C. C." width="70" filterBy="#{estructura.centrocosto.codigo}" filterMatchMode="contains" filterStyle="width: 50px">  
                                <h:outputText value="#{estructura.centrocosto.codigo}" />  
                            </p:column>                             
                            <p:column headerText="Nombre Centro Costo" filterBy="#{estructura.centrocosto.nombre}" filterMatchMode="contains" filterStyle="width: 200px">  
                                <h:outputText value="#{estructura.centrocosto.nombre}" />  
                            </p:column>
                        </p:dataTable>                         
                        <p:commandButton id="aceptarE" value="Aceptar" disabled="#{controlParametro.aceptar}" style="position: absolute; top: 390px; left: 572px; font-size: 12px" onclick="lOVEstructuras.clearFilters();" actionListener="#{controlParametro.actualizarEstructura()}" update="aceptarE" process="@this">
                            <p:resetInput target=":formularioDialogos:lOVEstructuras:globalFilter"/>
                        </p:commandButton>
                        <p:commandButton id="atrasE" value="Atras" style="position: absolute; top: 390px; left: 644px; font-size: 12px" onclick="estructurasDialogo.hide(), lOVEstructuras.clearFilters();" actionListener="#{controlParametro.cancelarCambioEstructura()}" update="lOVEstructuras" process="@this">
                            <p:resetInput target=":formularioDialogos:lOVEstructuras:globalFilter"/>
                        </p:commandButton>
                    </p:dialog>

                    <p:dialog header="Tipo Trabajador" widgetVar="TipoTrabajadorDialogo" draggable="false" resizable="false" closable="false" id="TipoTrabajadorDialogo"  
                              showEffect="fade" hideEffect="fade" width="415" modal="true" style="font-size: 11px;">
                        <p:dataTable id="lovTipoTrabajador" style="font-size: 11px; width: 385px" var="tipoTrabajador" value="#{controlParametro.lovTiposTrabajadores}" rowKey="#{tipoTrabajador.secuencia}"
                                     selection="#{controlParametro.seleccionTipoTrabajador}" selectionMode="single" widgetVar="lovTipoTrabajador" scrollable="true" scrollHeight="250" scrollWidth="400"
                                     filteredValue="#{controlParametro.filtradoLovTiposTrabajadores}" emptyMessage="No se encontraron resultados con el criterio de busqueda.">              

                            <p:ajax event="rowSelect" listener="#{controlParametro.activarAceptar()}" update=":formularioDialogos:aceptarTT"/>
                            <p:ajax event="rowDblselect" listener="#{controlParametro.actualizarTipoTrabajador()}" process="@this" onstart="lovTipoTrabajador.clearFilters()"/>

                            <f:facet name="header">  
                                <h:outputText value="Buscar Tipo Trabajador: "  style="position: absolute; left: 27px; top: 14px"/>  
                                <p:inputText id="globalFilter" onkeyup="lovTipoTrabajador.filter();" style="width:150px; position: relative; left: 35px;" />  
                            </f:facet>
                            <p:column filterBy="#{tipoTrabajador.codigo}" width="40" filterMatchMode="contains" filterStyle="width: 30px">
                                <f:facet name="header">
                                    <h:outputText style="text-align: center" value="Codigo" />
                                </f:facet>
                                <h:outputText  value="#{tipoTrabajador.codigo}" />
                            </p:column>
                            <p:column filterBy="#{tipoTrabajador.nombre}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Descripción del Tipo de Trabajador" />
                                </f:facet>
                                <h:outputText value="#{tipoTrabajador.nombre}" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton id="aceptarTT" style="position: relative; left: 270px" value="Aceptar" disabled="#{controlParametro.aceptar}" onclick="ovTipoTrabajador.clearFilters();" actionListener="#{controlParametro.actualizarTipoTrabajador()}" update="aceptarTT" process="@this">
                            <p:resetInput target=":formularioDialogos:lovTipoTrabajador:globalFilter"/>
                        </p:commandButton>
                        <p:commandButton id="atrasTT" style="position: relative; left: 270px" value="Atras" onclick="TipoTrabajadorDialogo.hide(), lovTipoTrabajador.clearFilters();" actionListener="#{controlParametro.cancelarCambioTipoTrabajador()}" update="lovTipoTrabajador" process="@this">
                            <p:resetInput target=":formularioDialogos:lovTipoTrabajador:globalFilter"/>
                        </p:commandButton>
                    </p:dialog> 


                    <p:dialog header="Procesos" widgetVar="ProcesosDialogo" draggable="false" resizable="false" closable="false" id="ProcesosDialogo"  
                              showEffect="fade" hideEffect="fade" width="341" modal="true" style="font-size: 11px;">
                        <p:dataTable id="lovProcesos" style="font-size: 11px; width: 310px" var="proceso" value="#{controlParametro.lovProcesos}" rowKey="#{proceso.secuencia}"
                                     selection="#{controlParametro.seleccionProcesos}" selectionMode="single" widgetVar="lovProcesos" scrollable="true" scrollWidth="330" scrollHeight="250"
                                     filteredValue="#{controlParametro.filtradoLovProcesos}" emptyMessage="No se encontraron resultados con el criterio de busqueda.">              
                            <p:ajax event="rowSelect" listener="#{controlParametro.activarAceptar()}" update=":formularioDialogos:aceptarP"/>
                            <p:ajax event="rowDblselect" listener="#{controlParametro.actualizarProceso()}" process="@this" onstart="lovProcesos.clearFilters()"/>
                            <f:facet name="header">  
                                <h:outputText value="Buscar Proceso: "  style="position: absolute; left: 27px; top: 14px"/>  
                                <p:inputText id="globalFilter" onkeyup="lovProcesos.filter();" style="width:100px; position: relative; left: 40px;" />  
                            </f:facet>
                            <p:column filterBy="#{proceso.descripcion}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Descripción" />
                                </f:facet>
                                <h:outputText  value="#{proceso.descripcion}" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton id="aceptarP" style="position: relative; left: 200px" value="Aceptar" disabled="#{controlParametro.aceptar}" actionListener="#{controlParametro.actualizarProceso()}" update="aceptarP" process="@this">
                            <p:resetInput target=":formularioDialogos:lovProcesos:globalFilter"/>
                        </p:commandButton>
                        <p:commandButton id="atrasP" style="position: relative; left: 200px" value="Atras" onclick="ProcesosDialogo.hide(), lovProcesos.clearFilters();" actionListener="#{controlParametro.cancelarCambioProceso()}" update="lovProcesos" process="@this">
                            <p:resetInput target=":formularioDialogos:lovProcesos:globalFilter"/>
                        </p:commandButton>
                    </p:dialog>

                    <p:dialog id="editarFechaDesde" header="Fecha desde" widgetVar="editarFechaDesde" resizable="false" closable="true" draggable="false" modal="true" height="55" width="240" style="font-size: 12px; padding: 0px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.fechadesdecausado}" style="overflow: auto; width: 200px; height: 40px" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputTextarea>
                    </p:dialog>

                    <p:dialog id="editarFechaHasta" header="Fecha hasta" widgetVar="editarFechaHasta" resizable="false" closable="true" draggable="false" modal="true" height="55" width="240" style="font-size: 12px; padding: 0px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.fechahastacausado}" style="overflow: auto; width: 200px; height: 40px" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputTextarea>
                    </p:dialog>

                    <p:dialog id="editarFechaCorte" header="Fecha corte" widgetVar="editarFechaCorte" resizable="false" closable="true" draggable="false" modal="true" height="55" width="240" style="font-size: 12px; padding: 0px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.fechasistema}" style="overflow: auto; width: 200px; height: 40px" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputTextarea>
                    </p:dialog>

                    <p:dialog id="editarEstructura" header="Estructura" widgetVar="editarEstructura" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.estructura.nombre}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarCodigoCC" header="Codigo Centro Costo" widgetVar="editarCodigoCC" resizable="false" draggable="false" closable="true"  modal="true" height="55" width="240" style="font-size: 12px" >  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.estructura.centrocosto.codigo}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarNombreCentroCosto" header="Centro Costo" widgetVar="editarNombreCentroCosto" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.estructura.centrocosto.nombre}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarTipoTrabajador" header="Tipo Trabajador" widgetVar="editarTipoTrabajador" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.tipotrabajador.nombre}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarProceso" header="Proceso" widgetVar="editarProceso" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.parametroLiquidacion.proceso.descripcion}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <!-- EDITOR TABLA -->

                    <p:dialog id="editarDesde" header="Fecha desde" widgetVar="editarDesde" resizable="false" closable="true" draggable="false" modal="true" height="55" width="240" style="font-size: 12px; padding: 0px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.fechadesdecausado}" style="overflow: auto; width: 200px; height: 40px" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputTextarea>
                    </p:dialog>

                    <p:dialog id="editarHasta" header="Fecha hasta" widgetVar="editarHasta" resizable="false" closable="true" draggable="false" modal="true" height="55" width="240" style="font-size: 12px; padding: 0px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.fechahastacausado}" style="overflow: auto; width: 200px; height: 40px" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </p:inputTextarea>
                    </p:dialog>

                    <p:dialog id="editarCodigo" header="Código" widgetVar="editarCodigo" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.empleado.codigoempleado}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarPApellido" header="Primer Apellido" widgetVar="editarPApellido" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.empleado.persona.primerapellido}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarSApellido" header="Segundo Apellido" widgetVar="editarSApellido" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.empleado.persona.segundoapellido}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarNombre" header="Nombre" widgetVar="editarNombre" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.empleado.persona.nombre}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="editarEstado" header="Estado" widgetVar="editarEstado" resizable="false" closable="true"  draggable="false" modal="true" height="55" width="240" style="font-size: 12px">  
                        <p:inputTextarea value="#{controlParametro.editarEmpleadosParametros.estadoParametro}" style="overflow: auto; width: 200px; height: 40px" readonly="true"/>
                    </p:dialog>

                    <p:dialog id="confirmarAdicionarEmpleados" header="ATENCIÓN...!" widgetVar="confirmarAdicionarEmpleados"  resizable="false" draggable="false" modal="true" height="149" width="400px" style="font-size: 12px" closable="false">  
                        <h:graphicImage value="Imagenes/alerta.jpg" width="110" height="80" style="position: absolute; left: 5px; top: 20px;"  />
                        <h:outputText value="Existe(n) #{controlParametro.empleadosParametrizados} Usuario(s) con este proceso parametrizado, esto puede ocasionar que los datos varien ya que uno o varios empleados serán liquidados por diferente persona." style="position: absolute; left: 110px; top: 20px; width: 270px; font-weight:bold; text-align: justify" />
                        <h:outputText value="¿Desea continuar?" style="position: absolute; left: 100px; top: 85px; width: 300px; font-weight:bold; text-align: center" />
                        <p:commandButton value="Aceptar" onclick="confirmarAdicionarEmpleados.hide();" actionListener="#{controlParametro.adicionarEmpleados()}" style="position: absolute; top: 115px; left: 220px; " process="@this" />
                        <p:commandButton value="Cancelar" onclick="confirmarAdicionarEmpleados.hide();" style="position: absolute; top: 115px; left: 292px" process="@this" />
                    </p:dialog>
                </h:form>

                <h:form id="formExportar">
                    <p:dataTable id="empleadosParametrosExportar" var="info" style="visibility: hidden; display: none;"                           
                                 value="#{controlParametro.empleadosParametros}">

                        <p:column headerText="Fecha_Desde">  
                            <f:facet name="header"><h:outputText value="Fecha desde" /></f:facet>
                            <h:outputText value="#{info.fechadesdecausado}" >
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Fecha_Hasta">  
                            <f:facet name="header"><h:outputText value="Fecha hasta" /></f:facet>
                            <h:outputText value="#{info.fechahastacausado}" >
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Fecha_Corte">  
                            <f:facet name="header"><h:outputText value="Fecha corte" /></f:facet>
                            <h:outputText value="#{info.fechasistema}" >
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputText>
                        </p:column>

                        <p:column>                                  
                            <f:facet name="header"><h:outputText value="Codigo"/></f:facet> 
                            <h:outputText value="#{info.empleado.codigoempleado}" />
                        </p:column>  

                        <p:column headerText="Primer_Apellido">      
                            <f:facet name="header"><h:outputText value="Primer Apellido"/></f:facet>
                            <h:outputText value="#{info.empleado.persona.primerapellido}" />
                        </p:column>

                        <p:column headerText="Segundo_Apellido">                                                              
                            <f:facet name="header"> 
                                <h:outputText value="Segundo apellido"/>
                            </f:facet>
                            <h:outputText value="#{info.empleado.persona.segundoapellido}" />
                        </p:column>  

                        <p:column>                                                              
                            <f:facet name="header"> 
                                <h:outputText value="Nombre"/>
                            </f:facet>
                            <h:outputText value="#{info.empleado.persona.nombre}" />
                        </p:column>  

                        <p:column >                                                                                              
                            <f:facet name="header"><h:outputText value="Estado"/></f:facet>
                            <h:outputText value="#{info.estadoParametro}" />
                        </p:column>  
                    </p:dataTable>
                </h:form>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

